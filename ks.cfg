# Simple Kickstart for RHEL 9.x — Test/Minimal
# You can use this for automated installation testing

#===========================
# Install Source & Language
#===========================

lang en_US.UTF-8
keyboard us
timezone Europe/Zurich --utc

# Install from the DVD/ISO (default behavior)
# If using network repo, replace with:
# url --url="http://server/repo/BaseOS/"
cdrom

#===========================
# Network
#===========================

network --bootproto=dhcp --ipv6=auto --activate
# To enforce hostname:
# network --hostname=rhel-test.localdomain

#===========================
# Root Password & User
#===========================

# Either plain text or hashed, plain text for testing:
rootpw redhat

# Optional: Create a user
user --name=damien --password=redhat --groups=wheel

#===========================
# Partitioning (simple auto)
#===========================

# Wipes disk and auto partitions — WARNING!!
# Good for testing only
clearpart --all --initlabel
autopart --type=lvm

# Alternative static example:
#part /boot --fstype="xfs" --size=1024
#part pv.01 --size=10000 --grow
#volgroup vg0 pv.01
#logvol / --vgname=vg0 --name=root --fstype=xfs --size=4096 --grow
#logvol swap --vgname=vg0 --name=swap --fstype=swap --recommended

#===========================
# System Services & Addons
#===========================

services --enabled=sshd,chronyd
firewall --enabled --service=ssh
selinux --enforcing

#===========================
# Bootloader
#===========================

bootloader --location=mbr --boot-drive=sda

#===========================
# Installation Behavior
#===========================

reboot --eject

#===========================
# Optional — Packages
#===========================

%packages
@core
# Add extras for testing
vim
bash-completion
%end


#===========================
# Post-install
#===========================

%post
echo "Installation complete at $(date)" > /root/installed.txt
%end
